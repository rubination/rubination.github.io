<!DOCTYPE html>
<html>
<head>
    <title>Batbot &ndash; Jake Rubin</title>
    <link rel="icon" href="../img/favicon.ico">
    <link rel="stylesheet" href="../style/default.css">
    <link rel="stylesheet" href="../style/navbar.css">
    <link rel="stylesheet" href="../style/projects.css">
    <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
    <div id="navbar">
        <div id="navtitle" class="navelem">
            <h1>JAKE RUBIN</h1>
        </div>
        <ul id="navlist" class="navnonmobile">
            <li>
                <a href="https://jakerubin.ca/" class="navelem navitem">
                    <h3>Home</h3>
                </a>
            </li>
            <li>
                <a href="https://jakerubin.ca/aboutme" class="navelem navitem">
                    <h3>About Me</h3>
                </a>
            </li>
            <li class="navproj">
                <span class="navelem navitem">
                    <h3>Projects</h3>
                    <img src="../img/downarrow.png" class="arrowimg">
                </span>
                <ul class="dropdown">
                    <li>
                        <a href="https://jakerubin.ca/projects/website" class="navelem navitem">
                            <h5>This Website</h5>
                        </a>
                    </li>
                    <li>
                        <a class="navelem navitem">
                            <h5>Batbot</h5>
                        </a>
                    </li>
                    <li>
                        <a href="https://jakerubin.ca/projects/covidapp" class="navelem navitem">
                            <h5>COVID App</h5>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <a class="navelem navitem navres navnonmobile" href="https://jakerubin.ca/rubinresume.pdf" download>
            <h3>Resume</h3>
            <img src="../img/download.svg" class="downloadimg">
        </a>
        <ul id="burgerbun">
            <li id="closedburger">
                <img src="../img/hamburger.png">
            </li>
            <li id="openburger">
                <span id="grillmarks">
                    <img src="../img/xicon.png">
                </span>
                <ul id="burgertoppings">
                    <li>
                        <a href="https://jakerubin.ca/" class="navelem navitem">
                            <h3>Home</h3>
                        </a>
                    </li>
                    <li>
                        <a href="https://jakerubin.ca/aboutme" class="navelem navitem">
                            <h3>About Me</h3>
                        </a>
                    </li>
                    <li>
                        <span id="projspan" class="navelem navitem">
                            <h3>Projects</h3>
                            <img id="burgerarrow" src="../img/downarrow.png" class="arrowimg">
                        </span>
                        <ul id="burgerdrop" style="display:none;">
                            <li>
                                <a href="https://jakerubin.ca/projects/website" class="navelem navitem">
                                    <h5>This Website</h5>
                                </a>
                            </li>
                            <li>
                                <a class="navelem navitem">
                                    <h5>Batbot</h5>
                                </a>
                            </li>
                            <li>
                                <a href="https://jakerubin.ca/projects/covidapp" class="navelem navitem">
                                    <h5>COVID App</h5>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a id="burgerres" class="navelem navitem navres" href="https://jakerubin.ca/rubinresume.pdf" download>
                            <h3>Resume</h3>
                            <img src="../img/download.svg" class="downloadimg">
                        </a>
                    </li>
                </ul>
                <div id="grease"></div>
            </li>
        </ul>
        <script src="../js/navbar.js"></script>
    </div>
    <div id="ptitle">
        <h1>Batbot</h1>
        <p>Feb 17, 2022 &ndash; March 10, 2022</p>
    </div>
    <div id="pcontrib">
        <a href="https://github.com/rubination">
            <img src="https://avatars.githubusercontent.com/u/90235766?v=4">
            Jake Rubin
        </a>
        <a href="https://github.com/LeonardoKamino">
            <img src="https://avatars.githubusercontent.com/u/59890834?v=4">
            Leo Kamino Barros
        </a>
        <a href="https://github.com/SanHalacoglu">
            <img src="https://avatars.githubusercontent.com/u/89543019?v=4">
            &Scedil;an Hala&ccedil;o&gbreve;lu
        </a>
        <a href="https://github.com/Ilamparithi-I">
            <img src="https://avatars.githubusercontent.com/u/63252233?v=4">
            Ilam Imayavaramban
        </a>
    </div>
    <div id="pfeatureimg" style="background-image:url(../img/batbot.jpg);"></div>
    <div id="pgit">
        <a href="https://github.com/CPEN-291/P1_B_G13">
            <div id="pgitlogo"></div>
            <p>Click here for the Github repository</p>
        </a>
    </div>
    <div id="ptoollist">
        <figure>
            <img src="../img/toolicons/adafruit.png">
            <figcaption>Adafruit</figcaption>
        </figure>
        <figure>
            <img src="../img/toolicons/circuitpython.png">
            <figcaption>CircuitPython</figcaption>
        </figure>
    </div>
    <div id="psynopsis">
        <p>
            This was the first project assigned in CPEN 291: Computer Engineering Design Studio I. 
            The goal of this project was to build a dancing robot, demonstrating skills with circuit construction and controlling complex hardware components via software.
            The decision to add the Batman theme was for overall aesthetics and for weight distribution via the cape.
        </p>
    </div>
    <div id="phardware">
        <div id="hwtablediv">
            <table>
                <thead>
                    <tr>
                        <th>Quantity</th>
                        <th>Item Name</th>
                        <th>Item Type</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>3D-Printed Robot Body (provided)</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>3D-Printed Robot Foot (provided)</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Adafruit Microcontroller</td>
                        <td>ItsyBitsy M4</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Adafruit 1.44" TFT Breakout Liquid Crystal Display</td>
                        <td>ST7735R</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Ultrasonic Distance Sensor</td>
                        <td>HC-SR04</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Shift Register</td>
                        <td>74HC595</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Piezo Buzzer</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Adafruit 3&times;4 Keypad</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Mini-Servo Motor</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>330 &PlusMinus; 16.5&ohm; Resistor</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>LED</td>
                        <td>
                            2 &times; Yellow<br>
                            1 &times; Green<br>
                            1 &times; Red
                        </td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Solderable Perfboard</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Solderless Breadboard</td>
                        <td></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3">
                            <a id="fritzlink">Click to view this project's Fritzing.</a>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
    <div id="pfritzmodal">
        <div>
            <div id="fritztop">
                <p>Batbot Fritzing</p>
                <img div id="fritzx" src="../img/xicon.png">
            </div>
            <img id="fritzimg" src="../img/featbatbot/DancingRobotFritz.png">
        </div>
    </div>
    <div id="pfeatures">
        <h1>FEATURES</h1>
        <div id="featimgs">
            <div class="featarrow leftarrow disabledarrow">
                <div class="arrowfill"></div>
            </div>
            <img id="demovidlink" class="featimg" src="../img/featbatbot/VideoClick.jpg" title="Click here to watch our video of Batbot!">
            <img class="featimg" src="../img/featbatbot/ChosenDance.jpg">
            <img class="featimg" src="../img/featbatbot/Gif.jpg">
            <img class="featimg" src="../img/featbatbot/leds.gif">
            <img class="featimg" src="../img/featbatbot/Password.jpg">
            <img class="featimg" src="../img/featbatbot/StankyLeg.jpg">
            <img class="featimg" src="../img/featbatbot/HappyDance.jpg">
            <img class="featimg" src="../img/featbatbot/AnotherDance.jpg">
            <img class="featimg" src="../img/featbatbot/Pet.jpg">
            <img class="featimg" src="../img/featbatbot/TopView.jpg">
            <div class="featarrow rightarrow">
                <div class="arrowfill"></div>
            </div>
        </div>
        <div id="dotbar">
            <div class="slidedot on"></div>
            <div class="slidedot"></div>
            <div class="slidedot"></div>
            <div class="slidedot"></div>
            <div class="slidedot"></div>
            <div class="slidedot"></div>
            <div class="slidedot"></div>
            <div class="slidedot"></div>
            <div class="slidedot"></div>
            <div class="slidedot"></div>
        </div>
        <div id="smallarrows">
            <div class="featarrow leftarrow disabledarrow">
                <div class="arrowfill"></div>
            </div>
            <div class="featarrow rightarrow">
                <div class="arrowfill"></div>
            </div>
        </div>
        <div id="feattext">
            <div class="feat">
                <h2 class="dash">1/10 &mdash; Sounds via Piezo Buzzer</h2>
                <h2 class="br">1/10 <br> Sounds via Piezo Buzzer</h2>
                <p>
                    Utilizing the Piezo buzzer served two purposes: provide the user with auditory feedback, and provide the robot with personality.  
                    This was accomplished using one or more instances of CircuitPython's <code>simpleio.tone()</code> function.
                    In total, there were seven sounds created for this project, stored as single commands or functions
                    (click each title to hear the sound it describes):
                </p>
                <ol id="soundlist">
                    <li>
                        <strong>Standard Tone:</strong> one single tone of 5000Hz, used when a user presses a key within the confines of instruction.
                    </li>
                    <li>
                        <strong>Error Tones:</strong> two short tones of 311.3Hz, used when a user has entered an erroneous input.
                    </li>
                    <li>
                        <strong>Correct Tones:</strong> five tones conforming to a broken major chord, used when a user enters the correct startup password.
                    </li>
                    <li>
                        <strong>Execute Tones:</strong> three tones used when a dance move or series of dance moves is executed.
                    </li>
                    <li>
                        <strong>Happy Sound:</strong> four tones used when the Happy Dance (see Feature 9) is activated via "petting" the robot.
                    </li>
                    <li>
                        <strong>Happy Ending Sound:</strong> four tones used at the conclusion of the aforementioned Happy Dance.
                    </li>
                    <li>
                        <strong>Bat Buzz:</strong> tones interpolating a very small snippet of the Batman theme song, played when the robot is "booting up" after the password sequence.
                    </li>
                </ol>
            </div>
            <div class="feat">
                <h2 class="dash">2/10 &mdash; Text via LCD</h2>
                <h2 class="br">2/10 <br> Text via LCD</h2>
                <p>
                    In order to give the user prompts, we needed to display text on the liquid crystal display (LCD).
                    To fit the theme of Batbot, this text displays on a black box with a yellow border.
                    The function used to achieve this uses a string argument of the text to display, and consists of four processes:
                </p>
                <ol>
                    <li>
                        <strong>Set Up Context:</strong> create an empty group of sprites to be appended to, and set it to display on the screen.
                    </li>
                    <li>
                        <strong>Create Yellow Border:</strong> create a 128 by 128 pixel bitmap and a one-colour palette of yellow.
                        Create a sprite with the bitmap and palette and append it to the group.
                        At this point it doesn't yet look like a border.
                    </li>
                    <li>
                        <strong>Create Inner Box:</strong> create a 108 by 108 bitmap and a black palette, creating and appending a sprite in the same way, making sure to center.
                        This displays on top of the yellow background, creating the yellow border effect.
                    </li>
                    <li>
                        <strong>Display Text:</strong> taking the string argument, create a label via <code>adafruit_display_text.label</code> of white text, and display within the dimensions of the inner box.
                    </li>
                </ol>
            </div>
            <div class="feat">
                <h2 class="dash">3/10 &mdash; GIFs via LCD</h2>
                <h2 class="br">3/10 <br> GIFs via LCD</h2>
                <p>
                    Not only does Batbot's LCD display text, but it can also display bitmap images.
                    However, it's enticing if the images can move with the robot rather than remaining constant.
                    Therefore, to simulate a GIF, we split GIFs into several bitmap images and dispersed calls to display these images throughout our dance sequences.
                    We displayed these images on the LCD in four steps:
                </p>
                <ol>
                    <li>
                        <strong>Setup Source:</strong> using the <code>displayio.OnDiskBitmap()</code> function, the source of the image to display, passed as an argument to the function, can be used to access the bitmap image.
                    </li>
                    <li>
                        <strong>Create TileGrid:</strong> create a tile grid to hold the bitmap image in the correct shape.
                    </li>
                    <li>
                        <strong>Create Group:</strong> create a group of sprites and append the tile grid to the group.
                    </li>
                    <li>
                        <strong>Display Image:</strong> finally, display the group on the LCD.
                    </li>
                </ol>
            </div>
            <div class="feat">
                <h2 class="dash">4/10 &mdash; LED Flashes</h2>
                <h2 class="br">4/10 <br> LED Flashes</h2>
                <p>
                    The four LEDs on the front of the robot allowed for visual feedback and flair.
                    This was done by accessing the group of pins in the 74HC595 shift register and turning the value of each pin to <code>True</code> or <code>False</code> as needed,
                        using CircuitPython's <code>time.sleep()</code> function to provide the timing of each sequence.
                    Two main LED sequences were made for Batbot:
                </p>
                <ol>
                    <li>
                        <strong>Blink:</strong> all LEDs light up at the same time, stay on for 0.1s, and turn off at the same time.
                    </li>
                    <li>
                        <strong>Chase:</strong> each LED lights up and turns off individually from left to right, then right to left.
                    </li>
                </ol>
            </div>
            <div class="feat">
                <h2 class="dash">5/10 &mdash; Passcode Entry</h2>
                <h2 class="br">5/10 <br> Passcode Entry</h2>
                <p>
                    On activation, the robot displays a prompt to enter a password to grant user access.
                    This was done to add a security feature to our robot, essentially so that only group members could run the code.
                    The process worked in the following steps:
                </p>
                <ol>
                    <li>
                        Individual numbers are entered into the program via keypad input. 
                        When a valid key is pressed, the standard tone plays while the new number is written to display and the previous number is replaced by a '*', mimicking how websites often display passwords to its inputter.
                        Each number is stored in an array to later be processed.
                    </li>
                    <li>
                        When the length of the correct password has been reached, the program no longer checks user input and instead compares the list of inputted numbers to that of the correct password.
                    </li>
                    <li>
                        If the password entered is correct, the bat signal appears on the LCD display, the LED slide sequence triggers, and the bat buzz and correct tones play.
                        The user is informed that they have access to Batbot.
                    </li>
                    <li>
                        If the password entered is false, the user is informed via text on LCD that the password entered is incorrect.
                        The LED blink sequence triggers, the error sound plays, and the password function is recalled for the user to try again.
                    </li>
                </ol>
            </div>
            <div class="feat">
                <h2 class="dash">6/10 &mdash; Individual Dances</h2>
                <h2 class="br">6/10 <br> Individual Dances</h2>
                <p>
                    The primary function of this project was to build a dancing robot, thus individual dances had to be programmed, each with their own callable function.
                    When prompted, a user can choose one of these dance moves by clicking a number on the keypad.  
                    The user is then prompted for how many times to repeat the move, and if applicable, which side to perform the dance.
                    The program stores this information in a tuple, and using a makeshift switch statement (as Python doesn't use switch statements), call the specific dance function and feed the additional information as arguments.
                    Each dance function rests in a for loop based on the number of repeats, and if applicable has opposite instructions for each side.
                    When a dance is executed, the LEDs display their Chase sequence and the execute tone plays.
                    Here are the dance moves we programmed for Batbot:
                </p>
                <ol>
                    <li>
                        <strong>Shuffle:</strong> this dance is based on the shuffle dance move popularized by the music group LMFAO in 2011.
                        Two shuffle functions were used: a regular shuffle and a smoother shuffle. 
                        In the regular shuffle, each leg servo is rotated from side to side in one command, leading to a quick transition.
                        In the smoother shuffle, the servo angles are changed in small increments, leading to a, by namesake, smoother transition.
                        In demonstration, the smoother shuffle function is called for this dance.
                        A GIF of Redfoo of LMFAO dancing in the music video from which this dance originated plays on the LCD during this dance.
                    </li>
                    <li>
                        <strong>Stanky Leg:</strong> this dance is based on the dance popularized by the hip hop trio GS Boyz in 2008, and requires an additional left or right leg user input.
                        The foot servo of the chosen side is rotated outward 50 degrees, and the opposite foot 12 degrees outward. 
                        The chosen leg is then rotated between 30 degrees outward and 30 degrees inward from reset position.
                        A GIF of a cat standing on it's hind legs moving side to side with the caption "Stanky Leg" plays during this dance.  
                        The direction the cat moves depends on which leg is moving, in which the bitmap images are arranged in initial or reverse order.
                    </li>
                    <li>
                        <strong>Ballet Shuffle:</strong> this uses the same functions as Shuffle, however Batbot's feet are angled inward 50 degrees from default positions to simulate the robot standing on its toes.
                        Each shuffle function has an argument isBallet, which if true enacts the feet angling.
                        In demonstration, the regular shuffle function is called for this dance.
                    </li>
                    <li>
                        <strong>Crip Walk:</strong> this dance is based on the dance created by Robert "Sugar Bear" Jackson in the 1970s.
                        First, the feet reset and the legs rotate inward 50 degrees from reset.  
                        Then, the left leg and left foot rotate to 50 degrees outward, the right leg 10 degrees out.
                        This then repeats on the other side.
                        A GIF of Snoop Dogg, an avid crip walker, dancing plays during this dance.
                    </li>
                    <li>
                        <strong>Frog:</strong> this dance mimics the actions of a hopping frog.
                        It accomplishes this in two steps: the jump and the landing.
                        For the jump, the legs are rotated outward 25 degrees from reset and the feet outward 35 degrees.
                        For the landing, the legs rotate to 35 degrees inward from reset and the feet reset.
                        A delay of 0.15s between the jump and landing ensures a quick jump motion.
                        A GIF of a frog displays during this dance.
                    </li>
                    <li>
                        <strong>Swim:</strong> this dance emulates a swimming motion, specifically that of the breast stroke.
                        To perform this in four steps, the legs rotate inward 40 degrees from reset, the feet rotate outward 40 degrees, the legs rotate outward 40 degrees from reset, then the feet reset.
                        A GIF of a swimming corgi displays during this dance.
                    </li>
                    <li>
                        <strong>Slide:</strong> this dance causes the robot to slide to the left or to the right, depending on which side is chosen.
                        The foot of the chosen leg rotates outward incrementally until it is 40 degrees from reset, then quickly resets.
                        A GIF of a chihuahua walking side to side on it's hind legs plays, going left or right depending on which leg is used.
                    </li>
                </ol>
            </div>
            <div class="feat">
                <h2 class="dash">7/10 &mdash; Demo Mode</h2>
                <h2 class="br">7/10 <br> Demo Mode</h2>
                <p>
                    This mode presents all available dance moves Batbot can perform.
                    When the user inputs the '*' key, rather than a number, the dance execution function is called with an argument queue of every single dance, repeating 3 times each side (if necessary).
                    Demo mode is the quickest way to exhibit the base requirement of Batbot: to be a dancing robot.
                </p>
            </div>
            <div class="feat">
                <h2 class="dash">8/10 &mdash; Choreography Mode</h2>
                <h2 class="br">8/10 <br> Choreography Mode</h2>
                <p>
                    Doing one dance at a time is cool, but what if the user wants Batbot to perform several in a row?
                    This is where choreography mode comes in, accessible by clicking '#' instead of a number on the keypad.
                    Choreography mode allows the user to input several dances, and collects the tuples in a queue.
                    Once the user again clicks '#', the queue of dance moves are executed one at a time.
                    To save storage, individual dance commands input a queue of only one tuple.
                </p>
            </div>
            <div class="feat">
                <h2 class="dash">9/10 &mdash; Petting and Happy Dance</h2>
                <h2 class="br">9/10 <br> Petting and Happy Dance</h2>
                <p>
                    This feature was implemented as an easter egg. 
                    Part of this dance is displayed in demo mode, but can only be individually accessed via "petting" the robot.
                    An HC-SR04 sonar located at the top of the bot detects the user's hand, and triggers the following sequence:
                </p>
                <ol>
                    <li>
                        The happy sound is played via the Piezo buzzer.
                    </li>
                    <li>
                        Two rounds of a secret Shock dance execute (this dance is not displayed in demo mode) amongst a happy dog GIF displaying on the LCD.
                    </li>
                    <li>
                        Three rounds of the Happy Dance initiate while displaying the same GIF as before.
                    </li>
                    <li>
                        The happy ending sound plays, indicating the sequence is over, and the initial prompt to select a dance, choreography mode, or demo mode displays.
                    </li>
                </ol>
            </div>
            <div class="feat">
                <h2 class="dash">10/10 &mdash; Amazing Decor!</h2>
                <h2 class="br">10/10 <br> Amazing Decor!</h2>
                <p>
                    As everyone in our class was tasked with the same project, we thought the decoration of Batbot could set it apart from other projects at an immediate glance.
                    The top and keypad-less side displays a Batman logo with "man" intentionally crossed out and replaced with "bot", and another Batman logo adorns the front.
                    However, the decorations do not simply serve aesthetic purposes, but also functional ones:
                </p>
                <ol>
                    <li>
                        <strong>Circuit cover:</strong> the cardboard box adorned in black and yellow serves the purpose of covering up the circuitry of the project, allowing for it to be neatly stored and unseen.
                        Additionally, the box gives a sturdy location to attach the keypad.
                    </li>
                    <li>
                        <strong>Weight balance:</strong> the cape on the back gave a counterweight to the mass of the LCD, LEDs and other circuitry which hung out the front of the robot.
                        This was one of the main reasons we were able to use the Batbot moniker.
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div></div>
    </footer>
    <style>
        @media only screen and (max-width:830px){
            #ptoollist::before{
                content:none;
            }

            #psynopsis, #phardware {
                flex-direction:column;
            }

            #psynopsis::before, #phardware::before {
                width:100%;
            }
        }

        @media only screen and (max-width:307px){
            #ptoollist {
                justify-content:left;
            }
        }
    </style>
    <script src="../js/projects.js"></script>
</body>
</html>